{"mappings":"oeAAAA,EAAA,S,4CCAA,IAAAC,EAAAD,EAAA,S,aAGA,IAAIE,EAAU,KAEd,MAAMC,GAAO,EAAAF,EAAAG,YACb,EAAAH,EAAAI,oBAAmBF,GAAMG,IACnBA,GACFJ,EAAUI,EAAKC,IACfC,EAAoBN,IAEpBO,MAAM,oDAIV,IAAIC,EAAS,UAEb,MAAMC,EAAYC,SAASC,cAAc,eACnCC,EAAUF,SAASC,cAAc,sBACjCE,EAAQH,SAASC,cAAc,oBAIrC,SAASG,EAAoBC,GAC3B,GAAIA,EAAEC,OAAOC,aAAa,oBAGxB,OAFAT,EAAS,eACTF,EAAoBN,GAGtBQ,EAAS,QACTF,EAAoBN,GAGtB,SAASM,EAAoBD,GAC3B,MAAMa,EAAcC,aAAaC,QAAQf,GAKnCgB,EAJeC,KAAKC,MAAML,GAELV,GAGxBgB,KAAIC,GACI,6CAA6CA,EAAKC,6PAKDD,EAAKE,yCACxCF,EAAKG,qLAIgCH,EAAKI,MAAMC,MAC7D,EACA,4IAGoD,EAAAC,EAAAC,0BAClDP,EAAKQ,oNAUhBC,KAAK,IACRzB,EAAU0B,UAAY,GACtB1B,EAAU2B,mBAAmB,aAAcf,GAjD7CT,EAAQyB,iBAAiB,QAASvB,GAClCD,EAAMwB,iBAAiB,QAASvB,G","sources":["src/library.js","src/js/library.js"],"sourcesContent":["import './js/loader';\nimport './js/auth';\nimport './js/signup-modal';\nimport './js/login-modal';\nimport './js/user-options';\nimport './js/library';\nimport './js/footer-modal';\nimport './js/film-modal';\n","import { getAuth, onAuthStateChanged } from 'firebase/auth';\nimport { moviesGenresConvertation } from './movies-genres-convertation';\n\nlet USER_ID = null;\n\nconst auth = getAuth();\nonAuthStateChanged(auth, user => {\n  if (user) {\n    USER_ID = user.uid;\n    markupLibraryRender(USER_ID);\n  } else {\n    alert('You must be loginned for using this function!');\n  }\n});\n\nlet FILTER = 'watched';\n\nconst listFilms = document.querySelector('.list-films');\nconst watched = document.querySelector('[data-watched-btn]');\nconst queue = document.querySelector('[data-queue-btn]');\nwatched.addEventListener('click', onClickFilterChange);\nqueue.addEventListener('click', onClickFilterChange);\n\nfunction onClickFilterChange(e) {\n  if (e.target.hasAttribute('data-watched-btn')) {\n    FILTER = 'watched';\n    markupLibraryRender(USER_ID);\n    return;\n  }\n  FILTER = 'queue';\n  markupLibraryRender(USER_ID);\n}\n\nfunction markupLibraryRender(uid) {\n  const savedMovies = localStorage.getItem(uid);\n  const parsedMovies = JSON.parse(savedMovies);\n\n  const array = parsedMovies[FILTER];\n\n  const markup = array\n    .map(item => {\n      return `<li class=\"link list-films_card\" data-id='${item.id}'>\n        <a class=\"link list-films_card-info\">\n                <div class=\"card-image__wrapper\">\n                    <img\n                    class=\"list-films_card-info_card-film\"\n                    src=https://image.tmdb.org/t/p/original/${item.poster_path}\n                    alt=\"${item.original_title}\"\n                />\n                </div>\n            <div class=\"list-films_card-info-footer\">\n            <h2 class=\"list-films_card-info-footer-name-film\">${item.title.slice(\n              0,\n              30\n            )}</h2>\n              <div class=\"card-info-footer_characteristics\">\n              <p class=\"list-films_card-info-footer-genre-film\">${moviesGenresConvertation(\n                item.genre_ids\n              )}</p>\n              <p class=\"list-films_card-info-footer-production-year\">\n                  for example\n              </p>\n              </div>\n            </div>\n        </a>\n        </li>`;\n    })\n    .join('');\n  listFilms.innerHTML = '';\n  listFilms.insertAdjacentHTML('afterbegin', markup);\n}\n"],"names":["parcelRequire","$amyG6","$1cafa503bc57b7a0$var$USER_ID","$1cafa503bc57b7a0$var$auth","getAuth","onAuthStateChanged","user","uid","$1cafa503bc57b7a0$var$markupLibraryRender","alert","$1cafa503bc57b7a0$var$FILTER","$1cafa503bc57b7a0$var$listFilms","document","querySelector","$1cafa503bc57b7a0$var$watched","$1cafa503bc57b7a0$var$queue","$1cafa503bc57b7a0$var$onClickFilterChange","e","target","hasAttribute","savedMovies","localStorage","getItem","markup","JSON","parse","map","item","id","poster_path","original_title","title","slice","$fteFn","moviesGenresConvertation","genre_ids","join","innerHTML","insertAdjacentHTML","addEventListener"],"version":3,"file":"library.2be5178d.js.map"}