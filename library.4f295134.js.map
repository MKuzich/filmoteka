{"mappings":"gfAAAA,EAAA,S,4CCAA,IAAAC,EAAAD,EAAA,S,aAGIE,EAAU,KAERC,GAAO,EAAAF,EAAAG,YACb,EAAAH,EAAAI,oBAAmBF,GAAM,SAAAG,GACnBA,EAEFC,EADAL,EAAUI,EAAKE,KAGfC,MAAM,oDAIV,IAAIC,EAAS,UAEPC,EAAYC,SAASC,cAAc,eACnCC,EAAUF,SAASC,cAAc,sBACjCE,EAAQH,SAASC,cAAc,oBAIrC,SAASG,EAAoBC,GAC3B,GAAIA,EAAEC,OAAOC,aAAa,oBAGxB,OAFAT,EAAS,eACTH,EAAoBL,GAGtBQ,EAAS,QACTH,EAAoBL,GAGtB,SAASK,EAAoBC,GAC3B,IAAMY,EAAcC,aAAaC,QAAQd,GAKnCe,EAJeC,KAAKC,MAAML,GAELV,GAGxBgB,KAAI,SAAAC,GACH,MAAO,8CAKiDC,OALJD,EAAKE,GAAG,6PAMvCD,OADmCD,EAAKG,YAAY,+BAKfF,OAJrCD,EAAKI,eAAe,wKASmBH,OALFD,EAAKK,MAAMC,MAC7D,EACA,IACA,yIAIEL,QAFkD,EAAAM,EAAAC,0BAClDR,EAAKS,WACL,4MASXC,KAAK,IACR1B,EAAU2B,UAAY,GACtB3B,EAAU4B,mBAAmB,aAAchB,GAjD7CT,EAAQ0B,iBAAiB,QAASxB,GAClCD,EAAMyB,iBAAiB,QAASxB,G","sources":["src/library.js","src/js/library.js"],"sourcesContent":["import './js/loader';\nimport './js/auth';\nimport './js/signup-modal';\nimport './js/login-modal';\nimport './js/user-options';\nimport './js/library';\nimport './js/footer-modal';\nimport './js/film-modal';\n","import { getAuth, onAuthStateChanged } from 'firebase/auth';\nimport { moviesGenresConvertation } from './movies-genres-convertation';\n\nlet USER_ID = null;\n\nconst auth = getAuth();\nonAuthStateChanged(auth, user => {\n  if (user) {\n    USER_ID = user.uid;\n    markupLibraryRender(USER_ID);\n  } else {\n    alert('You must be loginned for using this function!');\n  }\n});\n\nlet FILTER = 'watched';\n\nconst listFilms = document.querySelector('.list-films');\nconst watched = document.querySelector('[data-watched-btn]');\nconst queue = document.querySelector('[data-queue-btn]');\nwatched.addEventListener('click', onClickFilterChange);\nqueue.addEventListener('click', onClickFilterChange);\n\nfunction onClickFilterChange(e) {\n  if (e.target.hasAttribute('data-watched-btn')) {\n    FILTER = 'watched';\n    markupLibraryRender(USER_ID);\n    return;\n  }\n  FILTER = 'queue';\n  markupLibraryRender(USER_ID);\n}\n\nfunction markupLibraryRender(uid) {\n  const savedMovies = localStorage.getItem(uid);\n  const parsedMovies = JSON.parse(savedMovies);\n\n  const array = parsedMovies[FILTER];\n\n  const markup = array\n    .map(item => {\n      return `<li class=\"link list-films_card\" data-id='${item.id}'>\n        <a class=\"link list-films_card-info\">\n                <div class=\"card-image__wrapper\">\n                    <img\n                    class=\"list-films_card-info_card-film\"\n                    src=https://image.tmdb.org/t/p/original/${item.poster_path}\n                    alt=\"${item.original_title}\"\n                />\n                </div>\n            <div class=\"list-films_card-info-footer\">\n            <h2 class=\"list-films_card-info-footer-name-film\">${item.title.slice(\n              0,\n              30\n            )}</h2>\n              <div class=\"card-info-footer_characteristics\">\n              <p class=\"list-films_card-info-footer-genre-film\">${moviesGenresConvertation(\n                item.genre_ids\n              )}</p>\n              <p class=\"list-films_card-info-footer-production-year\">\n                  for example\n              </p>\n              </div>\n            </div>\n        </a>\n        </li>`;\n    })\n    .join('');\n  listFilms.innerHTML = '';\n  listFilms.insertAdjacentHTML('afterbegin', markup);\n}\n"],"names":["parcelRequire","$3SEMc","$93effc6fc56091ad$var$USER_ID","$93effc6fc56091ad$var$auth","getAuth","onAuthStateChanged","user","$93effc6fc56091ad$var$markupLibraryRender","uid","alert","$93effc6fc56091ad$var$FILTER","$93effc6fc56091ad$var$listFilms","document","querySelector","$93effc6fc56091ad$var$watched","$93effc6fc56091ad$var$queue","$93effc6fc56091ad$var$onClickFilterChange","e","target","hasAttribute","savedMovies","localStorage","getItem","markup","JSON","parse","map","item","concat","id","poster_path","original_title","title","slice","$hsNhQ","moviesGenresConvertation","genre_ids","join","innerHTML","insertAdjacentHTML","addEventListener"],"version":3,"file":"library.4f295134.js.map"}