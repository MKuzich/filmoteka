var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequired76b;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,a.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequired76b=a);var r=a("137kL"),i=a("6nRjx"),o=a("gfB1D");const l=document.querySelector("#homeL"),s=document.querySelector("#libraryL"),c=document.querySelector("[data-watched-btn]"),d=document.querySelector("[data-queue-btn]");var u=a("9B33X");const g=document.querySelector("#checkbox"),f=document.querySelector("[data-logout]");function v(){c.textContent="Watched",d.textContent="Queue",l.textContent="Home",s.textContent="My library",f.textContent="Log out",(0,r.logInEn)(),(0,i.signUpEn)(),(0,o.footerEn)(),u.languege.setAttribute("lang","en"),(0,u.setLocalLang)()}function b(){l.textContent="Домашня",s.textContent="Моя бібліотека",c.textContent="Переглянуті",d.textContent="В черзі",f.textContent="Вихід",(0,r.logInUk)(),(0,i.signUpUk)(),(0,o.footerUk)(),u.languege.setAttribute("lang","uk"),(0,u.setLocalLang)()}"uk"===localStorage.getItem("localLang")?(g.checked=!0,b()):(g.checked=!1,u.languege.setAttribute("html","en"),v()),g.addEventListener("input",(function(e){e.preventDefault(),g.checked?b():v()})),a("js4LK"),a("bMZn5"),a("422V3"),a("9CwSo"),a("gY4QW"),a("jE1jP");var m=a("amyG6"),y=a("fteFn"),h=a("kBzfj");m=a("amyG6");let p=null;const L=(0,m.getAuth)();(0,m.onAuthStateChanged)(L,(e=>{e&&(p=e.uid)}));let w={data:1,totalData:null,setTotalData:function(){const e=JSON.parse(localStorage.getItem(p));this.totalData=Math.ceil(e.watched.length/9)},change:function(e){this.data=e}};const _=document.querySelector(".library-cards-film");function k(e){const t=document.querySelector("#overlay-list-library");t&&t.remove(),w.setTotalData();let n="";for(let e=1;e<=w.totalData;e++)n+=S(e);n=`<div class='overlay-pagination' id='${e}'>${n}</div>`,_.insertAdjacentHTML("beforeend",n)}function S(e){let t="";return e===w.data?t+`<button class='btn-pagination-active'>${e}</button>`:t+`<button class='btn-pagination'>${e}</button>`}_.addEventListener("click",(function(e){if("BUTTON"!==e.target.nodeName)return;const t=document.querySelector("#overlay-list-library");if(!t)return;w.change(Number(e.target.textContent)),t.remove(),function(e){let t=JSON.parse(localStorage.getItem(p))[e];if(w.setTotalData(),t.length>9){let e=9*(w.data-1),n=e+9;return t=t.slice(e,n),void N(p,t)}N(p,t)}(T.data),window.scrollTo(0,0)}));var q=a("3k5Ll"),x=a("l4Mc0"),E=a("gxGpx");let T={data:"watched",change:function(e){this.data=e}},A=null;const C=(0,m.getAuth)();(0,m.onAuthStateChanged)(C,(e=>{if(e)A=e.uid,$.classList.add("library-active-btn"),$.removeAttribute("disabled"),j.removeAttribute("disabled"),M.innerHTML="",N(A,!1);else{let e;H.innerHTML="",e="uk"===localStorage.getItem("localLang")?'<div class="library__warning-wrapper"><strong class="library__warning" id = \'warning\'>На разі тут немає фільмів. Щоб користуватися цією бібліотекою, ви повинні ввійти в систему! Будь ласка, увійдіть або зареєструйтеся!</strong></div>':'<div class="library__warning-wrapper"><strong class="library__warning" id = \'warning\'>Now there are no movies. You must be loginned for using this library! Please log in or sign up!</strong></div>',M.innerHTML="",M.insertAdjacentHTML("beforeend",e),$.setAttribute("disabled","disabled"),j.setAttribute("disabled","disabled"),$.classList.remove("library-active-btn"),j.classList.remove("library-active-btn")}}));const M=document.querySelector(".library__warning-container"),H=document.querySelector(".list-films"),$=document.querySelector("[data-watched-btn]"),j=document.querySelector("[data-queue-btn]");function D(e){if(e.target.hasAttribute("data-watched-btn"))return T.change("watched"),$.classList.add("library-active-btn"),j.classList.remove("library-active-btn"),N(A,!1),w.change(1),void k("overlay-list-library");T.change("queue"),$.classList.remove("library-active-btn"),j.classList.add("library-active-btn"),N(A,!1),w.change(1),k("overlay-list-library")}function N(e,t){const n=localStorage.getItem(e);let a=JSON.parse(n)[T.data];a.length>9&&(a=a.slice(0,9)),t&&(a=t);const r=a.map((e=>`<li class="link list-films_card" data-id='${e.id}'>\n        <a class="link list-films_card-info">\n                <div class="card-image__wrapper">\n                    <img\n                    class="list-films_card-info_card-film"\n                    src=${(0,E.posterRender)(e.poster_path)}\n                    loading="lazy"\n                    alt="${e.original_title}"\n                />\n                </div>\n            <div class="list-films_card-info-footer">\n            <h2 class="list-films_card-info-footer-name-film">${(0,h.titleSrinking)(e.title)}</h2>\n              <div class="card-info-footer_characteristics">\n              <p class="list-films_card-info-footer-genre-film">${(0,h.genresSrinking)((0,y.moviesGenresConvertation)(e.genre_ids))}</p>\n              <p class="list-films_card-info-footer-production-year">\n              ${(0,x.dateConvertation)(e.release_date)} <span class="info-block__values--orange">${e.vote_average.toFixed(1)}</span>\n              </p>\n              </div>\n            </div>\n        </a>\n        </li>`)).join("");k("overlay-list-library"),H.innerHTML="",H.insertAdjacentHTML("afterbegin",r)}$.addEventListener("click",D),j.addEventListener("click",D);let I=null;const U=document.querySelector(".modal-close"),O=document.querySelector("[data-film-modal]");function G(){I.removeEventListener("click",F),U.removeEventListener("click",G),document.removeEventListener("keydown",B),O.removeEventListener("click",R)}function B(e){"Escape"===e.key&&G()}function R(e){e.target.classList.contains("backdrop")&&G()}function F(e){setTimeout((()=>{N(A,!1),w.change(1),k("overlay-list-library")}),0)}document.querySelector(".list-films").addEventListener("click",(function(e){if(!e.target.closest("li"))return;t=T.data,I=document.querySelector(`[data-action="${t}"]`),I.addEventListener("click",F),U.addEventListener("click",G),document.addEventListener("keydown",B),O.addEventListener("click",R);var t}));document.querySelector("#checkbox").addEventListener("input",(async function(){if(await(0,q.fetchMovieGenres)(),!A){let e;return H.innerHTML="",e="uk"===localStorage.getItem("localLang")?'<div class="library__warning-wrapper"><strong class="library__warning" id = \'warning\'>На разі тут немає фільмів. Щоб користуватися цією бібліотекою, ви повинні ввійти в систему! Будь ласка, увійдіть або зареєструйтеся!</strong></div>':'<div class="library__warning-wrapper"><strong class="library__warning" id = \'warning\'>Now there are no movies. You must be loginned for using this library! Please log in or sign up!</strong></div>',M.innerHTML="",void M.insertAdjacentHTML("beforeend",e)}N(A,!1),w.change(1),k("overlay-list-library")})),a("6HA5D"),a("brr8Z"),a("jo2Hs");
//# sourceMappingURL=library.1f0af7e1.js.map
