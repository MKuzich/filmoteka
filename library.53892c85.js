!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequired76b;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequired76b=r);var i=r("2eh48"),o=r("2EUDM"),l=r("jf5Po"),c=document.querySelector("#homeL"),s=document.querySelector("#libraryL"),d=document.querySelector("[data-watched-btn]"),u=document.querySelector("[data-queue-btn]");var v=r("2buvE"),g=document.querySelector("#checkbox"),f=document.querySelector("[data-logout]");function b(){d.textContent="Watched",u.textContent="Queue",c.textContent="Home",s.textContent="My library",f.textContent="Log out",(0,i.logInEn)(),(0,o.signUpEn)(),(0,l.footerEn)(),v.languege.setAttribute("lang","en"),(0,v.setLocalLang)()}function m(){c.textContent="Домашня",s.textContent="Моя бібліотека",d.textContent="Переглянуті",u.textContent="В черзі",f.textContent="Вихід",(0,i.logInUk)(),(0,o.signUpUk)(),(0,l.footerUk)(),v.languege.setAttribute("lang","uk"),(0,v.setLocalLang)()}"uk"===localStorage.getItem("localLang")?(g.checked=!0,m()):(g.checked=!1,v.languege.setAttribute("html","en"),b()),g.addEventListener("input",(function(e){e.preventDefault(),g.checked?m():b()})),r("b7JqP"),r("euqRf"),r("1Gwk9"),r("e7S07"),r("cRUDO"),r("a43B7");var y=r("bpxeT"),p=r("2TvXO"),h=r("3SEMc"),L=r("hsNhQ"),_=r("70uTk"),w=(h=r("3SEMc"),null),S=(0,h.getAuth)();(0,h.onAuthStateChanged)(S,(function(e){e&&(w=e.uid)}));var k={data:1,totalData:null,setTotalData:function(e){var t=JSON.parse(localStorage.getItem(w));this.totalData=Math.ceil(t[e].length/9)},change:function(e){this.data=e}},q=document.querySelector(".library-cards-film");function T(e){var t=document.querySelector("#overlay-list-library");t&&t.remove(),k.setTotalData(A.data);for(var n="",a=1;a<=k.totalData;a++)n+=E(a);n="<div class='overlay-pagination' id='".concat(e,"'>").concat(n,"</div>"),q.insertAdjacentHTML("beforeend",n)}function E(e){var t="";return e===k.data?t+"<button class='btn-pagination-active'>".concat(e,"</button>"):t+"<button class='btn-pagination'>".concat(e,"</button>")}q.addEventListener("click",(function(e){if("BUTTON"!==e.target.nodeName)return;var t=document.querySelector("#overlay-list-library");if(!t)return;k.change(Number(e.target.textContent)),t.remove(),function(e){var t=JSON.parse(localStorage.getItem(w))[e];if(k.setTotalData(A.data),t.length>9){var n=9*(k.data-1),a=n+9;return t=t.slice(n,a),void R(w,t)}R(w,t)}(A.data),window.scrollTo(0,0)}));var x=r("2ZaIc"),M=r("2dZGR"),D=r("1wRKO"),A={data:"watched",change:function(e){this.data=e}},C=null,H=(0,h.getAuth)();(0,h.onAuthStateChanged)(H,(function(e){var t;e?(C=e.uid,O.classList.add("library-active-btn"),O.removeAttribute("disabled"),I.removeAttribute("disabled"),N.innerHTML="",k.setTotalData(A.data),R(C,!1)):(U.innerHTML="",t="uk"===localStorage.getItem("localLang")?'<div class="library__warning-wrapper"><strong class="library__warning" id = \'warning\'>На разі тут немає фільмів. Щоб користуватися цією бібліотекою, ви повинні ввійти в систему! Будь ласка, увійдіть або зареєструйтеся!</strong></div>':'<div class="library__warning-wrapper"><strong class="library__warning" id = \'warning\'>Now there are no movies. You must be loginned for using this library! Please log in or sign up!</strong></div>',N.innerHTML="",N.insertAdjacentHTML("beforeend",t),O.setAttribute("disabled","disabled"),I.setAttribute("disabled","disabled"),O.classList.remove("library-active-btn"),I.classList.remove("library-active-btn"))}));var N=document.querySelector(".library__warning-container"),U=document.querySelector(".list-films"),O=document.querySelector("[data-watched-btn]"),I=document.querySelector("[data-queue-btn]");function j(e){if(e.target.hasAttribute("data-watched-btn")){A.change("watched"),O.classList.add("library-active-btn"),I.classList.remove("library-active-btn"),k.setTotalData(A.data),R(C,!1),k.change(1);var t=document.querySelector("#overlay-list-library");return t&&t.remove(),void(k.totalData>1&&T("overlay-list-library"))}A.change("queue"),O.classList.remove("library-active-btn"),I.classList.add("library-active-btn"),k.setTotalData(A.data),R(C,!1),k.change(1);var n=document.querySelector("#overlay-list-library");n&&n.remove(),k.totalData>1&&T("overlay-list-library")}function R(e,t){var n=localStorage.getItem(e),a=JSON.parse(n)[A.data];a.length>9&&(a=a.slice(0,9)),t&&(a=t);var r=a.map((function(e){return'<li class="link list-films_card" data-id=\''.concat(e.id,'\'>\n        <a class="link list-films_card-info">\n                <div class="card-image__wrapper">\n                    <img\n                    class="list-films_card-info_card-film"\n                    src=').concat((0,D.posterRender)(e.poster_path),'\n                    loading="lazy"\n                    alt="').concat(e.original_title,'"\n                />\n                </div>\n            <div class="list-films_card-info-footer">\n            <h2 class="list-films_card-info-footer-name-film">').concat((0,_.titleSrinking)(e.title),'</h2>\n              <div class="card-info-footer_characteristics">\n              <p class="list-films_card-info-footer-genre-film">').concat((0,_.genresSrinking)((0,L.moviesGenresConvertation)(e.genre_ids)),'</p>\n              <p class="list-films_card-info-footer-production-year">\n              ').concat((0,M.dateConvertation)(e.release_date),' <span class="info-block__values--orange">').concat(e.vote_average.toFixed(1),"</span>\n              </p>\n              </div>\n            </div>\n        </a>\n        </li>")})).join("");k.totalData>1&&T("overlay-list-library"),U.innerHTML="",U.insertAdjacentHTML("afterbegin",r)}O.addEventListener("click",j),I.addEventListener("click",j);var G=null,J=document.querySelector(".modal-close"),P=document.querySelector("[data-film-modal]");function F(){G.removeEventListener("click",Q),J.removeEventListener("click",F),document.removeEventListener("keydown",Z),P.removeEventListener("click",B)}function Z(e){"Escape"===e.key&&F()}function B(e){e.target.classList.contains("backdrop")&&F()}function Q(e){setTimeout((function(){R(C,!1),k.change(1),T("overlay-list-library")}),0)}function Y(){return(Y=e(y)(e(p).mark((function t(){var n;return e(p).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.fetchMovieGenres)();case 2:if(C){e.next=9;break}return U.innerHTML="",n="uk"===localStorage.getItem("localLang")?'<div class="library__warning-wrapper"><strong class="library__warning" id = \'warning\'>На разі тут немає фільмів. Щоб користуватися цією бібліотекою, ви повинні ввійти в систему! Будь ласка, увійдіть або зареєструйтеся!</strong></div>':'<div class="library__warning-wrapper"><strong class="library__warning" id = \'warning\'>Now there are no movies. You must be loginned for using this library! Please log in or sign up!</strong></div>',N.innerHTML="",N.insertAdjacentHTML("beforeend",n),e.abrupt("return");case 9:R(C,!1),k.change(1),T("overlay-list-library");case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}document.querySelector(".list-films").addEventListener("click",(function(e){if(!e.target.closest("li"))return;t=A.data,(G=document.querySelector('[data-action="'.concat(t,'"]'))).addEventListener("click",Q),J.addEventListener("click",F),document.addEventListener("keydown",Z),P.addEventListener("click",B);var t})),document.querySelector("#checkbox").addEventListener("input",(function(){return Y.apply(this,arguments)})),r("4F07H"),r("2Z7mb"),r("jSiUv")}();
//# sourceMappingURL=library.53892c85.js.map
